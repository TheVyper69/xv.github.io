<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> Mis XV</title>

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Open+Sans:wght@300;400;600&display=swap"
    rel="stylesheet">

  <!-- Bootstrap 5 CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha512-tAGcCfWxNclGd3iKL3SYmfiSzRFzb4b8B2u3/j6zjKo5XmN+L+7w3WP3Ew9zQjP0S3bsH4Eq43ZoEYF+4dUxng=="
    crossorigin=""></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Cambia las familias por las que uses -->
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Open+Sans:wght@300;400;600&display=swap"
    rel="stylesheet">

  <!-- Custom Styles -->
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />


</head>
<!-- Fuegos artificiales -->
<canvas id="fireworks" class="fireworks"></canvas>

<body>

  <!-- Overlay de invitación -->
  <div id="invitation-overlay" class="invitation-overlay" aria-hidden="true">
    <div class="invite-stage">
      <div class="envelope" id="envelope" aria-label="Abrir invitación" role="button" tabindex="0">

        <!-- BASE del sobre = bolsillo recortado -->
        <div class="env-base">
          <!-- La carta (con tu foto) AHORA está dentro de la BASE -->
          <div class="letter">
            <div class="card3d" id="photoCard" aria-live="polite">
              <div class="face front">
                <img src="img/2.jpeg" alt="Foto de invitación">
              </div>
              <div class="face back d-flex align-items-center justify-content-center">
                <span class="text-white-50">Toca para entrar</span>
              </div>
            </div>
          </div>
        </div>

        <!-- TAPA del sobre encima -->
        <div class="env-lid"></div>
      </div>

      <small class="hint text-white-50 mt-3">Toca para abrir</small>
    </div>
  </div>




  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm fixed-top">
    <div class="container">
      <a class="navbar-brand fw-bold" href="#"> Marlenny </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav"
        aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="mainNav">
        <ul class="navbar-nav mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="#boda">Los XV</a></li>
          <li class="nav-item"><a class="nav-link" href="#historia">Historia</a></li>
          <li class="nav-item"><a class="nav-link" href="#gracias-a">Gracias a</a></li>
          <li class="nav-item"><a class="nav-link" href="#registro">Registro</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Hero -->
  <header class="hero d-flex align-items-center text-center text-white"
    style="background-image:url('https://static.wixstatic.com/media/c837a6_e57945ee203d4c2282608344f313474e~mv2.png/v1/fill/w_1800,h_1000,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/c837a6_e57945ee203d4c2282608344f313474e~mv2.png');">
    <div class="container position-relative z-1">
      <h1 class="display-4 fw-bold">¡Mis XV!</h1>
      <p class="lead mb-4">Sábado, 27 de septiembre, 2025</p>
      <p id="countdown" class="display-6 fw-semibold mb-4"></p>
      <a href="#rsvp" class="btn btn-light btn-lg fw-semibold">Confirmar asistencia</a>
    </div>
    <div class="overlay"></div>
  </header>

  <main class="mt-5">

    <!-- La boda -->
    <section id="boda" class="py-5">
      <div class="container">
        <h2 class="section-title">Detalles de mis XV</h2>
        <p class="mb-4">Estamos encantados de invitarlos a la celebración de mis XV. Será íntima y llena de amor.
          Prepárate para un día de alegría y diversión.</p>

        <div class="row g-4">
          <div class="col-md-6">
            <img class="img-fluid rounded-3" src="img/1.jpeg" alt="Recepción">
          </div>
          <div class="col-md-6 d-flex flex-column justify-content-center">
            <h2 class="section-title">Ceremonia religiosa</h2>
            <ul class="list-group list-group-flush fs-5">
              <li class="list-group-item"><strong>Ceremonia:</strong> 01:00 pm</li>
              <li class="list-group-item"><strong>Lugar:</strong> Iglesia St.Joseph Catholic Parish, Denver Colorado
              </li>
            </ul>
            <div class="mt-4">
              <!-- Mapa: Av. Fray Antonio Alcalde, Guadalajara -->
              <div class="ratio ratio-16x9 rounded-3 shadow-sm">
                <iframe src="https://maps.google.com/maps?q=39.7259013,-104.9961801&z=16&output=embed" style="border:0;"
                  allowfullscreen loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                </iframe>
              </div>

              <!-- Botón directo a Google Maps -->
              <a href="https://www.google.com/maps/place/@39.7259013,-104.9961801,16z" target="_blank" rel="noopener"
                class="btn btn-outline-dark mt-3">
                Ver en Google Maps
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Historia de amor -->
    <section id="historia" class="py-5 bg-light">
      <div class="container">
        <h2 class="section-title">XV PRIMAVERAS</h2>
        <div class="row g-4">
          <div class="col-lg-5">
            <img class="img-fluid rounded-3" src="img/3.jpeg">
          </div>
          <div class="col-md-7">
            <p>Mi vida ha sido un libro lleno de aventuras, risas y sueños. Hoy, me encuentro en el umbral de un nuevo
              capítulo, uno que me llena de emoción y alegría. Es el momento de dejar de ser una niña para convertirme
              en una mujer, y me gustaría que formaras parte de esta historia.</p>
            <p>
              Te invito a celebrar mis quince años. Quiero compartir contigo la magia de este momento, lleno de música,
              baile y sorpresas que hemos preparado con mucho cariño. Tu presencia es el mejor regalo, y me haría
              inmensamente feliz que me acompañes en esta noche tan especial.
            </p>

            <p> Espero verte para crear juntos un recuerdo inolvidable que guardaré en mi corazón por siempre.</p>


            <section id="mapa-lupitas" class="py-5">
              <div class="container">
                <h2 class="section-title">Ubicación: Lupita's Event Center</h2>

                <!-- Mapa más pequeño (centrado) -->
                <div class="mx-auto" style="max-width:600px;">
                  <div class="ratio ratio-16x9 rounded-3 shadow-sm">
                    <iframe
                      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3021.622057999186!2d-105.016314!3d39.6786616!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x876c7f5a136a2f03%3A0x167e78d5fd7d5029!2sLupita's%20Event%20Center!5e0!3m2!1ses!2sus!4v1723717200000!5m2!1ses!2sus"
                      style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                  </div>
                </div>

                <!-- Botón directo a Google Maps -->
                <a href="https://www.google.com/maps/place/Lupita's+Event+Center/@39.6786616,-105.016314,292m/data=!3m1!1e3!4m6!3m5!1s0x876c7f5a136a2f03:0x167e78d5fd7d5029!8m2!3d39.6791995!4d-105.0165213!16s%2Fg%2F1tfzh7tr?entry=ttu"
                  target="_blank" rel="noopener" class="btn btn-outline-dark mt-3">
                  Ver en Google Maps
                </a>
              </div>
            </section>
          </div>

        </div>
      </div>
    </section>

    <!-- gracias-a -->
    <section id="gracias-a" class="py-5">
      <div class="container">


        <div class="row g-4">
          <div class="mt-5 text-center">
            <h3 class="section-title mb-4">Con cariño de</h3>
            <ul class="list-group list-group-flush fs-5 d-inline-block text-start">
              <li class="list-group-item">
                <strong>Padres:</strong> Sr. Baltazar Morales y Sra. Sandra Manzo
              </li>
              <li class="list-group-item">
                <strong>Padrinos:</strong> Sr. Andrés Venancio y Sra. Delmi Morales
              </li>
              <li class="list-group-item">
                <strong>Chambelán principal:</strong> Brandon Morales Manzo
              </li>
            </ul>
          </div>
        </div>
        <!-- Bloque agregado -->
      </div>
    </section>
    <section id="programa" class="py-5 bg-light">
      <div class="container">
        <h2 class="section-title text-center mb-5">Programa del evento</h2>

        <div class="timeline">
          <!-- Evento 1 -->
          <div class="timeline-item">
            <div class="timeline-marker"></div>
            <div class="timeline-content">
              <h5>Ceremonia Religiosa – 1:00 pm</h5>
              <p>Iglesia St. Joseph Catholic Parish<br>
                Dirección: 600 Galapagos St, Denver, CO 80204</p>
            </div>
          </div>

          <!-- Evento 2 -->
          <div class="timeline-item">
            <div class="timeline-marker"></div>
            <div class="timeline-content">
              <h5>Recepción – 5:00 pm</h5>
              <p>Lupita’s Event Center<br>
                Dirección: 2465 W Evans Ave, Denver, CO 80219</p>
            </div>
          </div>

          <!-- Evento 3 -->
          <div class="timeline-item">
            <div class="timeline-marker"></div>
            <div class="timeline-content">
              <h5>Comida – 5:00 pm a 8:00 pm</h5>
              <p>Durante la recepción</p>
            </div>
          </div>

          <!-- Evento 4 -->
          <div class="timeline-item">
            <div class="timeline-marker"></div>
            <div class="timeline-content">
              <h5>Entrada principal – 6:00 pm</h5>
              <p>Ingreso de los festejados</p>
            </div>
          </div>

          <!-- Evento 5 -->
          <div class="timeline-item">
            <div class="timeline-marker"></div>
            <div class="timeline-content">
              <h5>Baile – 8:00 pm a 12:30 am</h5>
              <p>Baile y celebración</p>
            </div>
          </div>
        </div>
      </div>
    </section>


    <!-- Deseamos verte -->
    <section class="cta py-5 text-center text-white" style="background-image:url('img/4.jpeg');">
      <div class="container position-relative z-1">
        <!-- RSVP -->
        <section id="rsvp" class="py-5">
          <div class="container text-center">
            <h2 class="section-title">Confirma tu asistencia</h2>
            <p class="mb-4">
              Por favor confirma antes del 27 de septiembre e indica cualquier restricción dietética o petición
              especial.
            </p>

            <!-- Botones para guardar en el calendario -->
            <div class="d-flex flex-wrap gap-2 justify-content-center">
              <!-- Android / Google Calendar -->
              <a class="btn btn-dark btn-lg" onclick="addToGoogleCal(
           'Evento — Ceremonia y Recepción',
           '2025-09-27T13:00',  /* inicio local Denver */
           '2025-09-28T00:30',  /* fin local Denver (12:30 am) */
           'Ceremonia: St. Joseph Catholic Parish, 600 Galapagos St, Denver, CO 80204. Recepción: Lupita’s Event Center, 2465 W Evans Ave, Denver, CO 80219.',
           'America/Denver'
         )">
                Guardar en Google Calendar (Android)
              </a>

              <!-- iOS / archivo .ics -->
              <a class="btn btn-dark btn-lg" onclick="downloadICS(
           'Evento — Ceremonia y Recepción',
           '2025-09-27T13:00',
           '2025-09-28T00:30',
           'Ceremonia: St. Joseph Catholic Parish, 600 Galapagos St, Denver, CO 80204. Recepción: Lupita’s Event Center, 2465 W Evans Ave, Denver, CO 80219.',
           'America/Denver'
         )">
                Guardar en Apple Calendar (.ics)
              </a>
            </div>

            <!-- (opcional) tu botón de email original como respaldo -->

          </div>
        </section>
      </div>
      <div class="overlay"></div>
    </section>

    <!-- Registro -->
    <section id="rsvp-form" class="py-5 bg-light">
      <div class="container">
        <h2 class="section-title text-center mb-4">Confirmación de asistencia</h2>

        <div class="ratio ratio-4x3 rounded-3 shadow-sm">
          <!-- Reemplaza el src por el de TU formulario -->
          <iframe
            src="https://docs.google.com/forms/d/e/1FAIpQLSekhLWDwoH0YEyXTawd-HxfUOyAgwFqy11V4V4gblUBjmEUuA/viewform?embedded=true"
            width="640" height="906" frameborder="0" marginheight="0" marginwidth="0">Cargando…</iframe>
        </div>

        <p class="text-center text-muted mt-3 small">
          Tus respuestas quedarán registradas y recibirás confirmación por correo.
        </p>
      </div>
    </section>




  </main>

  <!-- Footer -->
  <footer class="bg-dark text-white py-4">
    <div class="container text-center small">
      <p>¿Preguntas? Mi número es:</p>
      <p>Sandra: +1 (303) 564-3172 </p>
      <hr class="border-secondary">
      <p class="mb-0">© 2025 WILLIAN.</p>
    </div>
  </footer>
  <audio id="bg-music" src="mp3/Iframe Selena - Dreaming Of You (Audio) [jBdkstyfvHg].mp3"></audio>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous">
  </script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js">
  </script>
  <script>
    //reserva de calendario
    // Convierte 'YYYY-MM-DDTHH:mm' → 'YYYYMMDDTHHmm00' (formato que usa Google con &ctz)
    function toGoogleTime(localIso) {
      return localIso.replace(/[-:]/g, '') + '00';
    }

    // Abre Google Calendar con el evento precargado
    function addToGoogleCal(title, startLocal, endLocal, location, tz) {
      const base = 'https://calendar.google.com/calendar/render?action=TEMPLATE';
      const text = encodeURIComponent(title);
      const dates = `${toGoogleTime(startLocal)}/${toGoogleTime(endLocal)}`;
      const details = encodeURIComponent('Detalles del evento:\n' + location);
      const loc = encodeURIComponent(location);
      const url =
        `${base}&text=${text}&dates=${dates}&details=${details}&location=${loc}&ctz=${encodeURIComponent(tz)}`;
      window.open(url, '_blank', 'noopener');
    }

    // Genera y descarga un .ics (Apple/Outlook)
    function downloadICS(title, startLocal, endLocal, location, tzid) {
      const toICS = (s) => s.replace(/[-:]/g, '') + '00'; // YYYYMMDDTHHmm00
      const dtstamp = new Date().toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
      const uid = `${Date.now()}-${Math.random().toString(36).slice(2)}@invitacion`;

      const ics =
        `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Invitacion//ES
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
UID:${uid}
DTSTAMP:${dtstamp}
DTSTART;TZID=${tzid}:${toICS(startLocal)}
DTEND;TZID=${tzid}:${toICS(endLocal)}
SUMMARY:${title}
LOCATION:${location}
DESCRIPTION:${location}
END:VEVENT
END:VCALENDAR`;

      const blob = new Blob([ics], {
        type: 'text/calendar;charset=utf-8'
      });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `${title.replace(/[\\s:]+/g,'_')}.ics`;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }
    // Overlay de invitación
    (function () {
      const overlay = document.getElementById('invitation-overlay');
      const envelope = document.getElementById('envelope');
      const card = document.getElementById('photoCard');
      const music = document.getElementById('bg-music');

      // Bloquear scroll mientras está el overlay
      document.body.classList.add('locked');

      // Pasos:
      // 0 = sobre cerrado (fondo negro)
      // 1 = tapa abierta + carta sale del sobre (foto al frente)
      // 2 = tarjeta se voltea y pasa a "pantalla completa"; el overlay se vuelve transparente para ver el sitio detrás
      // 3 = se oculta el overlay
      let step = 0;

      function openEnvelope() {
        envelope.classList.add('open');
        step = 1;
      }

      function flipAndFullscreen() {
        card.classList.add('flipped');
        // Pequeñísima pausa para que se note el flip y luego expandimos a fullscreen


        setTimeout(() => {
          card.classList.add('fullscreen');
          overlay.classList.add('fade'); // el fondo negro se vuelve transparente
          document.body.classList.remove('locked');
          music.play().catch(err => console.log('Autoplay bloqueado hasta interacción:',
          err)); // ya se puede ver y hacer scroll del sitio
        }, 120);
        step = 2;
      }

      function hideOverlay() {
        overlay.classList.add('hide');
        // Limpieza final
        setTimeout(() => {
          overlay.remove();
        }, 500);
        step = 3;
      }

      // Click global en overlay: avanzar pasos
      overlay.addEventListener('click', () => {
        if (step === 0) openEnvelope();
        else if (step === 1) flipAndFullscreen();
        else if (step === 2) hideOverlay();
      });

      // Soporte teclado (Enter/Espacio)
      envelope.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          if (step === 0) openEnvelope();
          else if (step === 1) flipAndFullscreen();
        }
      });
    })();
    (function () {
      const envelope = document.getElementById('envelope');
      const lid = envelope.querySelector('.env-lid');

      // lid.addEventListener('transitionend', (e) => {
      //   if (e.propertyName === 'transform' && envelope.classList.contains('open')) {
      //     envelope.classList.add('lid-up'); // ahora la carta queda por encima
      //   }
      // });
    })();

    //fuegos artificiales
    (function () {
      const canvas = document.getElementById('fireworks');
      if (!canvas) return;
      const ctx = canvas.getContext('2d');

      /* ----- Dimensiones retina ----- */
      function resize() {
        const {
          innerWidth: w,
          innerHeight: h
        } = window;
        canvas.width = w * devicePixelRatio;
        canvas.height = h * devicePixelRatio;
        ctx.scale(devicePixelRatio, devicePixelRatio);
      }
      resize();
      window.addEventListener('resize', resize);

      /* ----- Partícula ----- */
      class Particle {
        constructor(x, y, angle, speed, life) {
          this.x = x;
          this.y = y;
          this.vx = Math.cos(angle) * speed;
          this.vy = Math.sin(angle) * speed;
          this.alpha = 1;
          this.decay = life;
          this.radius = 1 + Math.random() * 0.5; // tamaño más pequeño// tamaño aleatorio

        }
        update(dt) {
          this.x += this.vx * dt;
          this.y += this.vy * dt + 0.18 * dt * dt; // leve “gravedad”
          this.alpha -= this.decay * dt;
          return this.alpha > 0;
        }
        draw() {
          ctx.globalAlpha = Math.max(this.alpha, 0);

          // Degradado radial (centro blanco, dorado, transparente)
          const g = ctx.createRadialGradient(
            this.x, this.y, 0,
            this.x, this.y, this.radius * 2
          );
          g.addColorStop(0, '#ffffff');
          g.addColorStop(0.2, '#fff5c2');
          g.addColorStop(0.5, '#ffd700');
          g.addColorStop(1, 'rgba(255,215,0,0)');

          ctx.fillStyle = g;
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.radius * 3, 0, Math.PI * 2);
          ctx.fill();
        }
      }

      /* ----- Crear explosión ----- */
      function burst() {
        const x = Math.random() * canvas.clientWidth;
        const y = Math.random() * canvas.clientHeight * 0.5; // mitad superior
        const count = 80 + Math.random() * 60; // MÁS partículas
        for (let i = 0; i < count; i++) {
          const angle = Math.random() * Math.PI * 2;
          particles.push(
            new Particle(
              x, y,
              angle,
              70 + Math.random() * 50, // velocidad
              0.5 + Math.random() * 0.25 // desvanecimiento
            )
          );
        }
      }

      /* ----- Bucle de animación ----- */
      const particles = [];
      let last = performance.now();

      function animate(now) {
        const dt = (now - last) / 1000;
        last = now;

        ctx.clearRect(0, 0, canvas.clientWidth, canvas.clientHeight);

        // Mezcla aditiva para resaltar el brillo
        ctx.save();
        ctx.globalCompositeOperation = 'lighter';

        for (let i = particles.length - 1; i >= 0; i--) {
          if (!particles[i].update(dt)) particles.splice(i, 1);
          else particles[i].draw();
        }
        ctx.restore();

        if (running) requestAnimationFrame(animate);
      }

      /* ----- Planificador de ráfagas ----- */
      let bursts = 0;
      const maxBursts = 8; // MÁS ráfagas
      const interval = 500; // 0,5 s entre ráfagas
      let running = true;

      function queueBurst() {
        if (bursts < maxBursts) {
          burst();
          bursts++;
          setTimeout(queueBurst, interval);
        } else {
          // apagar animación tras 10 s para liberar recursos
          setTimeout(() => {
            running = false;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
          }, 10000);
        }
      }

      window.addEventListener('load', () => {
        queueBurst();
        requestAnimationFrame(animate);
      });
    })();
    // // mapa iglesia
    // const coords = [39.7259013, -104.9961801];

    // const map = L.map('map').setView([39.7259, -104.9962], 15);

    // L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    //   attribution: '&copy; OpenStreetMap contributors'
    // }).addTo(map);

    // L.marker([39.7259, -104.9962]).addTo(map)
    //   .bindPopup('St. Joseph Catholic Parish')
    //   .openPopup();

    // cuenta regresiva
   document.addEventListener('DOMContentLoaded', () => {
  const host = document.getElementById('countdown');
  if (!host) return;

  // Construye las tarjetas dentro del #countdown
  const parts = [
    { key:'days',    label:'DAYS'    },
    { key:'hours',   label:'HOURS'   },
    { key:'minutes', label:'MINUTES' },
    { key:'seconds', label:'SECONDS' }
  ];
  host.innerHTML = parts.map(p => `
    <div class="cd-tile" aria-live="polite">
      <div class="cd-card">
        <span class="cd-num" data-part="${p.key}">00</span>
      </div>
      <span class="cd-label">${p.label}</span>
    </div>
  `).join('');

  const target = new Date('2025-09-27T13:00:00-06:00').getTime(); // Denver, 1:00 pm
  const pad2 = n => String(Math.max(0, n)).padStart(2,'0');

  function setNum(part, val){
    const el = host.querySelector(`.cd-num[data-part="${part}"]`);
    if (!el) return;
    const newVal = pad2(val);
    if (el.textContent !== newVal) {
      el.textContent = newVal;
      el.classList.remove('cd-tick');
      // fuerza reflow para reiniciar animación
      void el.offsetWidth;
      el.classList.add('cd-tick');
    }
  }

  function tick(){
    let diff = target - Date.now();
    if (diff <= 0){
      setNum('days',0); setNum('hours',0); setNum('minutes',0); setNum('seconds',0);
      host.setAttribute('data-done','true');
      return clearInterval(tmr);
    }
    const d = Math.floor(diff/86400000); diff -= d*86400000;
    const h = Math.floor(diff/3600000);  diff -= h*3600000;
    const m = Math.floor(diff/60000);    diff -= m*60000;
    const s = Math.floor(diff/1000);

    setNum('days', d);
    setNum('hours', h);
    setNum('minutes', m);
    setNum('seconds', s);
  }

  tick();
  const tmr = setInterval(tick, 1000);
});
  </script>

</body>

</html>